{"version":3,"sources":["../../src/js/tracehub.js"],"names":[],"mappings":"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","file":"tracehub.js","sourcesContent":["/**\r\n *  author: MartinCui\r\n *  name: TraceHub\r\n *  used: TraceHub\r\n */\r\n\r\nvar TraceHub = {\r\n    url: \"http://10.1.3.120:18031/tracehub\",\r\n    trace_id: undefined,\r\n    timeBegin: undefined,\r\n    timeEnd: undefined,\r\n    callee_server_name: undefined,\r\n    setting: {\r\n        view: {\r\n            showLine: true,\r\n            selectedMulti: false,\r\n            dblClickExpand: false\r\n        },\r\n        data: {\r\n            simpleData: {\r\n                enable: true\r\n            }\r\n        },\r\n        callback: {\r\n            onNodeCreated: this.onNodeCreated,\r\n            beforeClick: undefined,\r\n            onClick: undefined\r\n        }\r\n    },\r\n    zNodes: undefined,\r\n    curMenu: undefined,\r\n    zTree_Menu: undefined,\r\n    beforeClick: function (treeId, node) {\r\n        var _that = TraceHub;\r\n        if (node.isParent) {\r\n            if (node.level === 0) {\r\n                var pNode = _that.curMenu;\r\n                while (pNode && pNode.level !==0) {\r\n                    pNode = pNode.getParentNode();\r\n                }\r\n                if (pNode !== node) {\r\n                    var a = $(\"#\" + pNode.tId + \"_a\");\r\n                    a.removeClass(\"cur\");\r\n                    _that.zTree_Menu.expandNode(pNode, false);\r\n                }\r\n                a = $(\"#\" + node.tId + \"_a\");\r\n                a.addClass(\"cur\");\r\n\r\n                var isOpen = false;\r\n                for (var i=0,l=node.children.length; i<l; i++) {\r\n                    if(node.children[i].open) {\r\n                        isOpen = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (isOpen) {\r\n                    _that.zTree_Menu.expandNode(node, true);\r\n                    _that.curMenu = node;\r\n                } else {\r\n                    _that.zTree_Menu.expandNode(node.children[0].isParent?node.children[0]:node, true);\r\n                    _that.curMenu = node.children[0];\r\n                }\r\n            } else {\r\n                _that.zTree_Menu.expandNode(node);\r\n            }\r\n        }\r\n        return !node.isParent;\r\n    },\r\n    onClick: function(e, treeId, node){\r\n        var data = node.data;\r\n        var _that = TraceHub;\r\n        _that.showData(data);\r\n    },\r\n    showData: function(data){\r\n        $('#trade_container').find('li').eq(0).children('span').eq(1).text(data.trace_id);\r\n        $('#trade_container').find('li').eq(1).children('span').eq(1).text(data.trace_layer);\r\n        $('#trade_container').find('li').eq(2).children('span').eq(1).text(data.trace_mode);\r\n        $('#trade_container').find('li').eq(3).children('span').eq(1).text(data.callee_mode);\r\n        $('#trade_container').find('li').eq(4).children('span').eq(1).text(data.callee_server_name);\r\n        $('#trade_container').find('li').eq(5).children('span').eq(1).text(data.call_method);\r\n        $('#trade_container').find('li').eq(6).children('span').eq(1).text(data.caller_host);\r\n        $('#trade_container').find('li').eq(7).children('span').eq(1).text(data.caller_port);\r\n        $('#trade_container').find('li').eq(8).children('span').eq(1).text(data.callee_host);\r\n        $('#trade_container').find('li').eq(9).children('span').eq(1).text(data.callee_port);\r\n        $('#trade_container').find('li').eq(10).children('span').eq(1).text(data.callee_endpoint);\r\n        $('#trade_container').find('li').eq(11).children('span').eq(1).text(data.anchor_entry);\r\n        $('#trade_container').find('li').eq(12).children('span').eq(1).text(data.timespan_begin);\r\n        $('#trade_container').find('li').eq(13).children('span').eq(1).text(data.anchor_exit);\r\n        $('#trade_container').find('li').eq(14).children('span').eq(1).text(data.timespan_end);\r\n        $('#trade_container').find('li').eq(15).children('span').eq(1).text(data.timespan);\r\n    },\r\n    init: function(){\r\n        var _that = this;\r\n        _that.setting.callback.beforeClick = _that.beforeClick;\r\n        _that.setting.callback.onClick = _that.onClick;\r\n\r\n        document.querySelector('#search_submit').onclick = _that.onBeforeSubmit;\r\n    },\r\n    onBeforeSubmit: function(){\r\n        var _that = TraceHub;\r\n        _that.trace_id = document.querySelector('#trace_id').value;\r\n        _that.timeBegin = document.querySelector('#timeBegin').value;\r\n        _that.timeEnd = document.querySelector('#timeEnd').value;\r\n        if( _that.trace_id == undefined ){\r\n            _that.trace_id = '';\r\n        }\r\n\r\n        if(_that.trace_id == ''){\r\n            if(_that.timeBegin == ''){\r\n                _that.timeBegin = _that.nowDate('start');\r\n                document.querySelector('#timeBegin').value = _that.timeBegin.slice(0,10);\r\n            }else{\r\n                _that.timeBegin += ' 00:00:00';\r\n            }\r\n            if(_that.timeEnd == ''){\r\n                _that.timeEnd = _that.nowDate('end');\r\n                document.querySelector('#timeEnd').value = _that.timeEnd.slice(0,10);\r\n            }else{\r\n                _that.timeEnd += ' 23:59:59';\r\n            }\r\n            var boolean = _that.dateCompare(_that.timeBegin,_that.timeEnd);\r\n            if(boolean){\r\n                //弹出提示框\r\n                return false;\r\n            }else {\r\n                var data = {\r\n                    \"timeBegin\" : _that.timeBegin,\r\n                    \"timeEnd\" : _that.timeEnd,\r\n                };\r\n            }\r\n        }else{\r\n            var data = {\r\n                \"trace_id\" : _that.trace_id,\r\n            };\r\n        }\r\n        _that.getData(data);\r\n    },\r\n    nowDate: function(m){\r\n        var a = new Date();\r\n        var n = a.getFullYear();\r\n        var y = a.getMonth() + 1;\r\n        var d = a.getDate();\r\n        if(m == 'start'){\r\n            return n +'-'+ (y>=10?y:'0'+y)+'-' + (d>=10?d:'0'+d) + ' 00:00:00';\r\n        }else{\r\n            return n+'-'+ (y>=10?y:'0'+y)+'-' + (d>=10?d:'0'+d) + ' 23:59:59';\r\n        }\r\n    },\r\n    dateCompare: function(start,end){\r\n        var a = new Date(start).getTime();\r\n        var b = new Date(end).getTime();\r\n        if(a > b){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    },\r\n    getData: function(data){\r\n        var _that = this;\r\n\r\n        $.ajax({\r\n            url : _that.url,\r\n            type: \"post\",\r\n            dataType: \"json\",\r\n            data: data\r\n        }).done(function( res ){\r\n            if(res == null || res == []){\r\n                //alert('无数据返回');\r\n                return false;\r\n            }\r\n            console.log(JSON.stringify(res));\r\n            var trace_detail=[];\r\n            var trace_id=null;\r\n            for (var item of res){\r\n                var trace;\r\n                if(trace_id != null && trace_id == item.trace_id){\r\n                    trace = {\r\n                        id : Number(trace_id)+1,\r\n                        pId : trace_id,\r\n                        name: \"trace_layer \"+item.trace_layer,\r\n                        data: item\r\n                    };\r\n                    trace_detail.push(trace);\r\n                }else if(trace_id == null){\r\n                    trace_id = item.trace_id;\r\n                    trace = {\r\n                        id : trace_id,\r\n                        pId : 0,\r\n                        name: \"trace_id \"+trace_id,\r\n                        open: true\r\n                    };\r\n                    trace_detail.push(trace);\r\n                    trace = {\r\n                        id : Number(trace_id)+1,\r\n                        pId : trace_id,\r\n                        name: \"trace_layer \"+item.trace_layer,\r\n                        data: item\r\n                    };\r\n                    trace_detail.push(trace);\r\n                }else{\r\n                    trace_id = item.trace_id;\r\n                    trace = {\r\n                        id : trace_id,\r\n                        pId : 0,\r\n                        name: \"trace_id \"+trace_id,\r\n                    };\r\n                    trace_detail.push(trace);\r\n                    trace = {\r\n                        id : Number(trace_id)+1,\r\n                        pId : trace_id,\r\n                        name: \"trace_layer \"+item.trace_layer,\r\n                        data: item\r\n                    };\r\n                    trace_detail.push(trace);\r\n                }\r\n            }\r\n            _that.zNodes = trace_detail;\r\n            _that.initZTree();\r\n        }).fail(function(xhr, textStatus, errorThrown){\r\n            console.log(xhr.responseText);\r\n            console.log(textStatus);\r\n        });\r\n    },\r\n    initZTree : function(){\r\n        var _that = this;\r\n        $.fn.zTree.init($(\"#trade_menu\"), _that.setting, _that.zNodes);\r\n        _that.zTree_Menu = $.fn.zTree.getZTreeObj(\"trade_menu\");\r\n        _that.curMenu = _that.zTree_Menu.getNodes()[0].children[0];\r\n        _that.zTree_Menu.selectNode(_that.curMenu);\r\n        var a = $(\"#\" + _that.zTree_Menu.getNodes()[0].tId + \"_a\");\r\n        a.addClass(\"cur\");\r\n        _that.showData(_that.zTree_Menu.getNodes()[0].children[0].data);\r\n        $('#trade_container').addClass('show');\r\n    }\r\n};\r\n\r\nTraceHub.init();"]}